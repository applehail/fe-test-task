# Сервис API

Сервис реализует методы необходимые для выполнения тестового задания.

Сервис использует REST архитектуру.

Описание методов в формате OpenAPI v3 находится в файле [fe-test-task-api.yaml](docs/fe-test-task-api.yaml). Для просмотра можно воспользоваться [онлайн-редактором](https://editor-next.swagger.io/).

## Установка

Для запуска требуется версия [Node.js](https://nodejs.org/) v18.18.0+.

Для ускорения установки желательно использовать [yarn](https://yarnpkg.com/), но можно и встроенный в Node.js npm.

```sh
corepack enable
yarn set version stable
yarn install
```

## Настройка и запуск

Сервис конфигурируется переменными окружениям через файл [.env](.env).

По умолчанию сервис настроен на запуск по адресу http://localhost:8080 с настройкой CORS на http://localhost:5173. При необходимости перед запуском измените настройки.

Запускается сервис командой

```sh
yarn start
```

или

```sh
node dist/index.js
```

В БД сервиса созданы пользователи:

- Администратор (логин: admin, пароль: a)
- Менеджер (логин: manager, пароль: a)

## Описание методов

### Проверка работы

Работоспособность сервиса можно проверить перейдя по ссылке http://localhost:8080/health-check. В случае работы сервис вернет строку _ok_.

### Аутентификация

```
/auth
```

В случае успешного выполнения в ответе вернется поле token содержащее JWT токен для этого пользователя. Дальнейшие запросы к защищенным методам необходимо выполнять подставляя в заголовок **Authorization** со значением **Bearer token**.

### Информация о текущем пользователе

```
/users/me
```

Метод возвращает полную информацию о текущем пользователе.

Кроме того он возвращает поле **config** содержащее основные константы. В данном случае - возможные роли пользователей.
