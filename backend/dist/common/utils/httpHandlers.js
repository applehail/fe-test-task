"use strict";var c=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var R=(e,t)=>{for(var o in t)c(e,o,{get:t[o],enumerable:!0})},f=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of l(t))!x.call(e,s)&&s!==o&&c(e,s,{get:()=>t[s],enumerable:!(r=S(t,s))||r.enumerable});return e};var g=e=>f(c({},"__esModule",{value:!0}),e);var q={};R(q,{getUserAgent:()=>C,getUserIp:()=>b,handleServiceResponse:()=>y,validateRequest:()=>T});module.exports=g(q);var u=require("http-status-codes");var a=require("zod"),n=class{constructor(t,o){this.data=t,this.statusCode=o}};var Z=a.z.object({items:a.z.array(a.z.number())}).required();var y=(e,t)=>t.status(e.statusCode).send(e.data),T=e=>(t,o,r)=>{try{let s={...t.body,...t.query,...t.params};console.log("validateRequest:",s),e.parse(s),r()}catch(s){console.log("err:",s);let p=[];s.errors.map(m=>{let h=m.message+": "+m.path.join(",");p.push(h)});let i=p.join(", "),d=u.StatusCodes.BAD_REQUEST;o.status(d).send(new n(i,d))}},b=e=>e.header("x-forwarded-for")?.split(",").shift()||e.socket?.remoteAddress,C=e=>e.header("User-Agent")?.trim();0&&(module.exports={getUserAgent,getUserIp,handleServiceResponse,validateRequest});
